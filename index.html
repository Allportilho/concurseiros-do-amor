<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desafio Concurseiros do Amor‚Ñ¢</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #e63946;
            --secondary: #a8dadc;
            --accent: #f1faee;
            --dark: #1d3557;
            --light: #f8f9fa;
            --success: #2a9d8f;
            --warning: #e9c46a;
            --danger: #e63946;
            --policial: #457b9d;
            --fiscal: #9d4edd;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--accent);
            color: var(--dark);
            line-height: 1.6;
            padding-bottom: 40px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            background: linear-gradient(to right, var(--dark), var(--policial));
            color: white;
            padding: 25px 0;
            text-align: center;
            border-bottom: 5px solid var(--primary);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .logo-heart {
            color: var(--primary);
            animation: heartbeat 1.5s infinite;
        }
        
        @keyframes heartbeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        /* Competidores */
        .competitors {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .competitor-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            width: 300px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            text-align: center;
            border-top: 6px solid;
            transition: transform 0.3s;
        }
        
        .competitor-card:hover {
            transform: translateY(-5px);
        }
        
        .competitor-card.policial {
            border-color: var(--policial);
        }
        
        .competitor-card.fiscal {
            border-color: var(--fiscal);
        }
        
        .competitor-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
        }
        
        .avatar-policial {
            background-color: var(--policial);
        }
        
        .avatar-fiscal {
            background-color: var(--fiscal);
        }
        
        .competitor-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .competitor-area {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 15px;
        }
        
        .points-display {
            font-size: 2.8rem;
            font-weight: 800;
            margin: 10px 0;
        }
        
        .policial-points {
            color: var(--policial);
        }
        
        .fiscal-points {
            color: var(--fiscal);
        }
        
        /* Controles */
        .controls {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        }
        
        .section-title {
            color: var(--dark);
            border-left: 5px solid var(--primary);
            padding-left: 15px;
            margin-bottom: 25px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            color: var(--primary);
        }
        
        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .control-card {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }
        
        .control-card h3 {
            margin-bottom: 15px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        .input-with-button {
            display: flex;
            gap: 10px;
        }
        
        .input-with-button input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #d32f2f;
        }
        
        .btn-secondary {
            background-color: var(--secondary);
            color: var(--dark);
        }
        
        .btn-secondary:hover {
            background-color: #8ec7c9;
        }
        
        .btn-small {
            padding: 8px 15px;
            font-size: 0.9rem;
        }
        
        /* Metas e Penalidades */
        .metas-penalidades {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .metas, .penalidades {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        }
        
        .metas-list, .penalidades-list {
            list-style: none;
        }
        
        .meta-item, .penalidade-item {
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--success);
            background-color: #f8f9fa;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .penalidade-item {
            border-left-color: var(--danger);
        }
        
        .meta-status {
            font-weight: 600;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .meta-cumprida {
            background-color: rgba(42, 157, 143, 0.2);
            color: var(--success);
        }
        
        .meta-nao-cumprida {
            background-color: rgba(230, 57, 70, 0.1);
            color: var(--danger);
        }
        
        /* Progresso e Temporada */
        .progresso-temporada {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .progresso, .temporada {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        }
        
        .week-progress {
            margin-top: 20px;
        }
        
        .week-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }
        
        .week-item:last-child {
            border-bottom: none;
        }
        
        .week-winner {
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .winner-policial {
            background-color: rgba(69, 123, 157, 0.1);
            color: var(--policial);
        }
        
        .winner-fiscal {
            background-color: rgba(157, 78, 221, 0.1);
            color: var(--fiscal);
        }
        
        /* Vencedor e Pr√™mios */
        .vencedor-premios {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .vencedor-atual, .premios {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        }
        
        .winner-display {
            text-align: center;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
            background: linear-gradient(135deg, var(--accent), white);
            border: 2px dashed var(--primary);
        }
        
        .winner-name {
            font-size: 2.2rem;
            font-weight: 800;
            margin: 15px 0;
            color: var(--dark);
        }
        
        .premios-list {
            list-style: none;
            margin-top: 20px;
        }
        
        .premio-item {
            padding: 12px;
            margin-bottom: 12px;
            border-radius: 8px;
            background-color: #f8f9fa;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            .control-grid, .metas-penalidades, .progresso-temporada, .vencedor-premios {
                grid-template-columns: 1fr;
            }
            
            header h1 {
                font-size: 2rem;
                flex-direction: column;
                gap: 10px;
            }
            
            .competitors {
                gap: 20px;
            }
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .modal h2 {
            margin-bottom: 20px;
            color: var(--dark);
            border-left: 4px solid var(--primary);
            padding-left: 15px;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 25px;
        }
        
        /* Footer */
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 25px;
            border-top: 1px solid #ddd;
            color: #666;
            font-size: 0.9rem;
        }
        
        .clausulas-amor {
            font-style: italic;
            margin-top: 10px;
            color: var(--primary);
            font-weight: 600;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1><i class="fas fa-trophy logo-heart"></i> Desafio Concurseiros do Amor‚Ñ¢ <i class="fas fa-heart logo-heart"></i></h1>
            <p class="subtitle">Transformando a rotina de estudos em uma competi√ß√£o saud√°vel, disciplinada e motivadora</p>
        </div>
    </header>
    
    <div class="container">
        <!-- Competidores e Pontua√ß√£o -->
        <div class="competitors">
            <div class="competitor-card policial">
                <div class="competitor-avatar avatar-policial">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div class="competitor-name">Competidora B</div>
                <div class="competitor-area">√Årea Policial</div>
                <div class="points-display policial-points" id="points-policial">0</div>
                <div>Pontos da Semana</div>
            </div>
            
            <div class="competitor-card fiscal">
                <div class="competitor-avatar avatar-fiscal">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="competitor-name">Competidor A</div>
                <div class="competitor-area">√Årea Fiscal/Controle</div>
                <div class="points-display fiscal-points" id="points-fiscal">0</div>
                <div>Pontos da Semana</div>
            </div>
        </div>
        
        <!-- Controles de Pontua√ß√£o -->
        <div class="controls">
            <h2 class="section-title"><i class="fas fa-gamepad"></i> Controles de Pontua√ß√£o</h2>
            
            <div class="control-grid">
                <!-- Estudo Di√°rio -->
                <div class="control-card">
                    <h3><i class="fas fa-clock"></i> Estudo Di√°rio</h3>
                    <p>Cada 30 minutos l√≠quidos de estudo = 10 pontos</p>
                    <div class="input-group">
                        <label for="study-time">Minutos de estudo (Competidor A):</label>
                        <div class="input-with-button">
                            <input type="number" id="study-time-fiscal" min="0" max="120" placeholder="M√°x: 120 min (2h)">
                            <button class="btn btn-primary btn-small" onclick="addStudyTime('fiscal')">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="study-time">Minutos de estudo (Competidora B):</label>
                        <div class="input-with-button">
                            <input type="number" id="study-time-policial" min="0" max="120" placeholder="M√°x: 120 min (2h)">
                            <button class="btn btn-primary btn-small" onclick="addStudyTime('policial')">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Metas Semanais -->
                <div class="control-card">
                    <h3><i class="fas fa-bullseye"></i> Metas Semanais</h3>
                    <p>Meta cumprida = 25 pontos cada</p>
                    <div class="input-group">
                        <label>Competidora B - Metas cumpridas:</label>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-secondary btn-small" onclick="toggleMeta('policial', 'lei-seca')">Lei Seca</button>
                            <button class="btn btn-secondary btn-small" onclick="toggleMeta('policial', 'questoes')">Quest√µes</button>
                            <button class="btn btn-secondary btn-small" onclick="toggleMeta('policial', 'disciplina')">Disciplina</button>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>Competidor A - Metas cumpridas:</label>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-secondary btn-small" onclick="toggleMeta('fiscal', 'questoes')">Quest√µes</button>
                            <button class="btn btn-secondary btn-small" onclick="toggleMeta('fiscal', 'disciplina')">Disciplina</button>
                        </div>
                    </div>
                </div>
                
                <!-- Quest√µes Extras e Simulados -->
                <div class="control-card">
                    <h3><i class="fas fa-question-circle"></i> Quest√µes e Simulados</h3>
                    <p>A cada quest√£o ap√≥s a meta = 1 ponto | Simulado completo = 100 pontos</p>
                    <div class="input-group">
                        <label>Quest√µes extras (Competidora B):</label>
                        <div class="input-with-button">
                            <input type="number" id="extra-questions-policial" min="0" placeholder="N¬∫ de quest√µes">
                            <button class="btn btn-primary btn-small" onclick="addExtraQuestions('policial')">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>Quest√µes extras (Competidor A):</label>
                        <div class="input-with-button">
                            <input type="number" id="extra-questions-fiscal" min="0" placeholder="N¬∫ de quest√µes">
                            <button class="btn btn-primary btn-small" onclick="addExtraQuestions('fiscal')">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>
                    </div>
                    <div style="margin-top: 15px;">
                        <button class="btn btn-secondary" onclick="addSimulado('policial')">
                            <i class="fas fa-file-alt"></i> Simulado Competidora B (+100)
                        </button>
                        <button class="btn btn-secondary" onclick="addSimulado('fiscal')" style="margin-left: 10px;">
                            <i class="fas fa-file-alt"></i> Simulado Competidor A (+100)
                        </button>
                    </div>
                </div>
                
                <!-- B√¥nus e Penalidades -->
                <div class="control-card">
                    <h3><i class="fas fa-star"></i> B√¥nus e Penalidades</h3>
                    <p>B√¥nus de const√¢ncia: 100 pontos | Penalidades: -50 ou -100 pontos</p>
                    <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 15px;">
                        <button class="btn btn-primary" onclick="addBonus('policial')">
                            <i class="fas fa-award"></i> B√¥nus Const√¢ncia Competidora B
                        </button>
                        <button class="btn btn-primary" onclick="addBonus('fiscal')">
                            <i class="fas fa-award"></i> B√¥nus Const√¢ncia Competidor A
                        </button>
                        <button class="btn btn-danger" onclick="applyPenalty('policial', '2dias')">
                            <i class="fas fa-exclamation-triangle"></i> Penalidade 2 dias sem estudo
                        </button>
                        <button class="btn btn-danger" onclick="applyPenalty('fiscal', 'nenhuma-meta')">
                            <i class="fas fa-exclamation-triangle"></i> Penalidade Nenhuma Meta
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Metas e Penalidades -->
        <div class="metas-penalidades">
            <div class="metas">
                <h2 class="section-title"><i class="fas fa-check-circle"></i> Metas Semanais</h2>
                <ul class="metas-list" id="metas-list">
                    <!-- Metas ser√£o inseridas via JavaScript -->
                </ul>
            </div>
            
            <div class="penalidades">
                <h2 class="section-title"><i class="fas fa-exclamation-triangle"></i> Penalidades Aplicadas</h2>
                <ul class="penalidades-list" id="penalidades-list">
                    <!-- Penalidades ser√£o inseridas via JavaScript -->
                </ul>
            </div>
        </div>
        
        <!-- Progresso e Temporada -->
        <div class="progresso-temporada">
            <div class="progresso">
                <h2 class="section-title"><i class="fas fa-chart-line"></i> Progresso da Semana</h2>
                <div class="week-progress" id="week-progress">
                    <!-- Progresso ser√° inserido via JavaScript -->
                </div>
                <button class="btn btn-primary" style="margin-top: 20px; width: 100%;" onclick="finalizarSemana()">
                    <i class="fas fa-flag-checkered"></i> Finalizar Semana e Declarar Vencedor
                </button>
            </div>
            
            <div class="temporada">
                <h2 class="section-title"><i class="fas fa-calendar-alt"></i> Temporada (4 semanas)</h2>
                <div id="temporada-progress">
                    <!-- Temporada ser√° inserida via JavaScript -->
                </div>
                <div style="margin-top: 25px; padding: 15px; background-color: #f0f7ff; border-radius: 8px;">
                    <h3 style="margin-bottom: 10px;">Pr√≥ximo ciclo:</h3>
                    <p id="next-cycle">Semana 1 de 4</p>
                    <button class="btn btn-secondary" onclick="iniciarNovaSemana()" style="margin-top: 10px;">
                        <i class="fas fa-redo"></i> Iniciar Nova Semana
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Vencedor e Pr√™mios -->
        <div class="vencedor-premios">
            <div class="vencedor-atual">
                <h2 class="section-title"><i class="fas fa-crown"></i> Vencedor da Semana</h2>
                <div class="winner-display" id="winner-display">
                    <p>Aguardando finaliza√ß√£o da semana...</p>
                    <div class="winner-name" id="winner-name">-</div>
                    <p id="winner-details">Vencedor ser√° declarado ao final da semana</p>
                </div>
            </div>
            
            <div class="premios">
                <h2 class="section-title"><i class="fas fa-gift"></i> Pr√™mios Dispon√≠veis</h2>
                <ul class="premios-list">
                    <li class="premio-item"><i class="fas fa-film"></i> Escolher filme/s√©rie da semana</li>
                    <li class="premio-item"><i class="fas fa-heart"></i> Date pago pelo outro</li>
                    <li class="premio-item"><i class="fas fa-star"></i> Pedido especial (dentro do bom senso üòè)</li>
                    <li class="premio-item"><i class="fas fa-spa"></i> Massagem, caf√© na cama ou jantar preparado</li>
                    <li class="premio-item"><i class="fas fa-umbrella-beach"></i> Escolher o rol√™ do fim de semana</li>
                </ul>
            </div>
        </div>
        
        <!-- Modal de Resultados -->
        <div class="modal" id="results-modal">
            <div class="modal-content">
                <h2><i class="fas fa-trophy"></i> Resultado da Semana</h2>
                <div id="modal-results-content">
                    <!-- Conte√∫do ser√° inserido via JavaScript -->
                </div>
                <div class="modal-buttons">
                    <button class="btn btn-primary" onclick="closeModal()">Fechar</button>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer>
            <p>Desafio Concurseiros do Amor‚Ñ¢ - Regulamento Oficial</p>
            <p class="clausulas-amor">"O amor √© soberano sobre qualquer pontua√ß√£o" ‚ù§Ô∏è</p>
            <p style="margin-top: 15px;">
                <button class="btn btn-secondary" onclick="resetAllData()">
                    <i class="fas fa-trash-alt"></i> Reiniciar Todos os Dados
                </button>
                <button class="btn btn-secondary" onclick="exportData()" style="margin-left: 10px;">
                    <i class="fas fa-download"></i> Exportar Dados
                </button>
            </p>
        </footer>
    </div>
    
    <script>
        // Estado da aplica√ß√£o
        const state = {
            currentWeek: 1,
            seasonWeeks: 4,
            points: {
                policial: 0,
                fiscal: 0
            },
            metas: {
                policial: {
                    'lei-seca': false,
                    'questoes': false,
                    'disciplina': false
                },
                fiscal: {
                    'questoes': false,
                    'disciplina': false
                }
            },
            studyToday: {
                policial: 0,
                fiscal: 0
            },
            extraQuestions: {
                policial: 0,
                fiscal: 0
            },
            simulados: {
                policial: 0,
                fiscal: 0
            },
            bonusConstancia: {
                policial: false,
                fiscal: false
            },
            penalidades: [],
            weekHistory: [],
            seasonWinner: null
        };
        
        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            loadFromLocalStorage();
            updateUI();
        });
        
        // Fun√ß√µes de atualiza√ß√£o da interface
        function updateUI() {
            // Atualizar pontos
            document.getElementById('points-policial').textContent = state.points.policial;
            document.getElementById('points-fiscal').textContent = state.points.fiscal;
            
            // Atualizar metas
            updateMetasList();
            
            // Atualizar penalidades
            updatePenalidadesList();
            
            // Atualizar progresso da semana
            updateWeekProgress();
            
            // Atualizar temporada
            updateTemporada();
            
            // Atualizar pr√≥ximo ciclo
            document.getElementById('next-cycle').textContent = `Semana ${state.currentWeek} de ${state.seasonWeeks}`;
            
            // Atualizar vencedor se houver
            if (state.weekHistory.length > 0 && state.weekHistory[state.weekHistory.length - 1].winner) {
                const lastWeek = state.weekHistory[state.weekHistory.length - 1];
                document.getElementById('winner-name').textContent = lastWeek.winner === 'policial' ? 'Competidora B' : 'Competidor A';
                document.getElementById('winner-details').textContent = `Venceu a semana ${lastWeek.week} com ${lastWeek.points} pontos`;
                
                // Estilizar o display do vencedor
                const winnerDisplay = document.getElementById('winner-display');
                winnerDisplay.style.background = lastWeek.winner === 'policial' 
                    ? 'linear-gradient(135deg, rgba(69, 123, 157, 0.1), white)' 
                    : 'linear-gradient(135deg, rgba(157, 78, 221, 0.1), white)';
                winnerDisplay.style.borderColor = lastWeek.winner === 'policial' ? 'var(--policial)' : 'var(--fiscal)';
            }
            
            // Salvar no localStorage
            saveToLocalStorage();
        }
        
        function updateMetasList() {
            const metasList = document.getElementById('metas-list');
            metasList.innerHTML = '';
            
            // Metas da Competidora B
            const metasPolicial = [
                { id: 'lei-seca', text: 'Competidora B: Lei Seca (6 dias de leitura)', status: state.metas.policial['lei-seca'] },
                { id: 'questoes', text: 'Competidora B: 80 quest√µes semanais', status: state.metas.policial['questoes'] },
                { id: 'disciplina', text: 'Competidora B: Disciplina (assunto)', status: state.metas.policial['disciplina'] }
            ];
            
            // Metas do Competidor A
            const metasFiscal = [
                { id: 'questoes', text: 'Competidor A: 300 quest√µes semanais', status: state.metas.fiscal['questoes'] },
                { id: 'disciplina', text: 'Competidor A: Disciplina (assunto)', status: state.metas.fiscal['disciplina'] }
            ];
            
            // Adicionar todas as metas √† lista
            [...metasPolicial, ...metasFiscal].forEach(meta => {
                const li = document.createElement('li');
                li.className = 'meta-item';
                li.innerHTML = `
                    <span>${meta.text}</span>
                    <span class="meta-status ${meta.status ? 'meta-cumprida' : 'meta-nao-cumprida'}">
                        ${meta.status ? 'Cumprida' : 'N√£o Cumprida'}
                    </span>
                `;
                metasList.appendChild(li);
            });
        }
        
        function updatePenalidadesList() {
            const penalidadesList = document.getElementById('penalidades-list');
            penalidadesList.innerHTML = '';
            
            if (state.penalidades.length === 0) {
                const li = document.createElement('li');
                li.className = 'penalidade-item';
                li.textContent = 'Nenhuma penalidade aplicada esta semana';
                penalidadesList.appendChild(li);
                return;
            }
            
            state.penalidades.forEach(penalidade => {
                const li = document.createElement('li');
                li.className = 'penalidade-item';
                li.innerHTML = `
                    <span>${penalidade.competidor === 'policial' ? 'Competidora B' : 'Competidor A'}: ${penalidade.motivo}</span>
                    <span class="meta-status meta-nao-cumprida">-${penalidade.pontos} pontos</span>
                `;
                penalidadesList.appendChild(li);
            });
        }
        
        function updateWeekProgress() {
            const weekProgress = document.getElementById('week-progress');
            weekProgress.innerHTML = '';
            
            // Criar itens para cada dia da semana
            const days = ['Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta', 'S√°bado', 'Domingo'];
            
            days.forEach(day => {
                const div = document.createElement('div');
                div.className = 'week-item';
                div.innerHTML = `
                    <span>${day}</span>
                    <span>Estudo: ${state.studyToday.policial > 0 || state.studyToday.fiscal > 0 ? 'Registrado' : 'A registrar'}</span>
                `;
                weekProgress.appendChild(div);
            });
        }
        
        function updateTemporada() {
            const temporadaProgress = document.getElementById('temporada-progress');
            temporadaProgress.innerHTML = '';
            
            if (state.weekHistory.length === 0) {
                temporadaProgress.innerHTML = '<p>Nenhuma semana conclu√≠da ainda.</p>';
                return;
            }
            
            state.weekHistory.forEach(week => {
                const div = document.createElement('div');
                div.className = 'week-item';
                
                const winnerClass = week.winner === 'policial' ? 'winner-policial' : 'winner-fiscal';
                const winnerName = week.winner === 'policial' ? 'Competidora B' : 'Competidor A';
                
                div.innerHTML = `
                    <span>Semana ${week.week}</span>
                    <span class="week-winner ${winnerClass}">${winnerName}</span>
                    <span>${week.points} pontos</span>
                `;
                temporadaProgress.appendChild(div);
            });
        }
        
        // Fun√ß√µes de intera√ß√£o
        function addStudyTime(competidor) {
            const inputId = `study-time-${competidor}`;
            const input = document.getElementById(inputId);
            const minutes = parseInt(input.value) || 0;
            
            if (minutes <= 0) {
                alert('Por favor, insira um n√∫mero v√°lido de minutos.');
                return;
            }
            
            // Limite di√°rio de 120 minutos (2h)
            const maxMinutes = 120;
            const studyMinutes = Math.min(minutes, maxMinutes);
            
            // Cada 30 minutos = 10 pontos
            const studyPoints = Math.floor(studyMinutes / 30) * 10;
            
            // Atualizar pontos
            state.points[competidor] += studyPoints;
            
            // Registrar estudo hoje
            state.studyToday[competidor] += studyMinutes;
            
            // Limpar input
            input.value = '';
            
            // Atualizar UI
            updateUI();
            
            // Feedback
            showFeedback(`${competidor === 'policial' ? 'Competidora B' : 'Competidor A'} ganhou ${studyPoints} pontos por ${studyMinutes} minutos de estudo!`);
        }
        
        function toggleMeta(competidor, meta) {
            state.metas[competidor][meta] = !state.metas[competidor][meta];
            
            // Se a meta foi marcada como cumprida, adicionar pontos
            if (state.metas[competidor][meta]) {
                state.points[competidor] += 25;
                showFeedback(`${competidor === 'policial' ? 'Competidora B' : 'Competidor A'} cumpriu uma meta e ganhou 25 pontos!`);
            } else {
                // Se desmarcou, remover pontos
                state.points[competidor] -= 25;
                showFeedback(`${competidor === 'policial' ? 'Competidora B' : 'Competidor A'} teve uma meta desmarcada e perdeu 25 pontos.`);
            }
            
            updateUI();
        }
        
        function addExtraQuestions(competidor) {
            const inputId = `extra-questions-${competidor}`;
            const input = document.getElementById(inputId);
            const questions = parseInt(input.value) || 0;
            
            if (questions <= 0) {
                alert('Por favor, insira um n√∫mero v√°lido de quest√µes.');
                return;
            }
            
            // Cada quest√£o extra = 1 ponto
            state.points[competidor] += questions;
            state.extraQuestions[competidor] += questions;
            
            // Limpar input
            input.value = '';
            
            // Atualizar UI
            updateUI();
            
            // Feedback
            showFeedback(`${competidor === 'policial' ? 'Competidora B' : 'Competidor A'} ganhou ${questions} pontos por quest√µes extras!`);
        }
        
        function addSimulado(competidor) {
            // Simulado completo = 100 pontos
            state.points[competidor] += 100;
            state.simulados[competidor] += 1;
            
            // Atualizar UI
            updateUI();
            
            // Feedback
            showFeedback(`${competidor === 'policial' ? 'Competidora B' : 'Competidor A'} completou um simulado e ganhou 100 pontos!`);
        }
        
        function addBonus(competidor) {
            // B√¥nus de const√¢ncia = 100 pontos
            if (!state.bonusConstancia[competidor]) {
                state.points[competidor] += 100;
                state.bonusConstancia[competidor] = true;
                
                // Atualizar UI
                updateUI();
                
                // Feedback
                showFeedback(`${competidor === 'policial' ? 'Competidora B' : 'Competidor A'} ganhou 100 pontos de b√¥nus por const√¢ncia!`);
            } else {
                alert('B√¥nus de const√¢ncia j√° foi aplicado esta semana!');
            }
        }
        
        function applyPenalty(competidor, tipo) {
            let pontos = 0;
            let motivo = '';
            
            if (tipo === '2dias') {
                pontos = 50;
                motivo = 'Dois dias seguidos sem estudar e sem aviso';
            } else if (tipo === 'nenhuma-meta') {
                pontos = 100;
                motivo = 'N√£o cumpriu nenhuma meta semanal';
            }
            
            // Aplicar penalidade
            state.points[competidor] -= pontos;
            state.penalidades.push({
                competidor,
                motivo,
                pontos
            });
            
            // Atualizar UI
            updateUI();
            
            // Feedback
            showFeedback(`${competidor === 'policial' ? 'Competidora B' : 'Competidor A'} recebeu uma penalidade de -${pontos} pontos!`);
        }
        
        function finalizarSemana() {
            // Determinar vencedor
            let winner = null;
            let winnerPoints = 0;
            let empate = false;
            
            if (state.points.policial > state.points.fiscal) {
                winner = 'policial';
                winnerPoints = state.points.policial;
            } else if (state.points.fiscal > state.points.policial) {
                winner = 'fiscal';
                winnerPoints = state.points.fiscal;
            } else {
                empate = true;
                winnerPoints = state.points.policial;
            }
            
            // Salvar semana no hist√≥rico
            const weekResult = {
                week: state.currentWeek,
                points: winnerPoints,
                winner: empate ? 'empate' : winner,
                details: {
                    policial: state.points.policial,
                    fiscal: state.points.fiscal
                }
            };
            
            state.weekHistory.push(weekResult);
            
            // Se for a √∫ltima semana da temporada, determinar campe√£o
            if (state.currentWeek === state.seasonWeeks) {
                determineSeasonWinner();
            }
            
            // Mostrar resultados no modal
            showResultsModal(weekResult, empate);
            
            // Incrementar semana atual se n√£o for a √∫ltima
            if (state.currentWeek < state.seasonWeeks) {
                state.currentWeek++;
            }
            
            // Resetar pontos e dados da semana (mas manter hist√≥rico)
            resetWeekData();
            
            // Atualizar UI
            updateUI();
        }
        
        function showResultsModal(weekResult, empate) {
            const modal = document.getElementById('results-modal');
            const content = document.getElementById('modal-results-content');
            
            let html = '';
            
            if (empate) {
                html = `
                    <div style="text-align: center; padding: 20px;">
                        <h3 style="color: var(--warning); margin-bottom: 15px;"><i class="fas fa-handshake"></i> Empate T√©cnico!</h3>
                        <p>Ambos os competidores terminaram a semana com <strong>${weekResult.points} pontos</strong>.</p>
                        <p>De acordo com o regulamento: ambos ganham! üòå</p>
                        <div style="display: flex; justify-content: center; gap: 30px; margin: 25px 0;">
                            <div style="text-align: center;">
                                <div class="competitor-avatar avatar-policial" style="width: 70px; height: 70px; margin-bottom: 10px;">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div style="font-weight: bold;">Competidora B</div>
                                <div>${weekResult.details.policial} pontos</div>
                            </div>
                            <div style="text-align: center;">
                                <div class="competitor-avatar avatar-fiscal" style="width: 70px; height: 70px; margin-bottom: 10px;">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div style="font-weight: bold;">Competidor A</div>
                                <div>${weekResult.details.fiscal} pontos</div>
                            </div>
                        </div>
                        <p style="font-style: italic; color: var(--primary);">"Beijo obrigat√≥rio ao final de cada semana" ‚ù§Ô∏è</p>
                    </div>
                `;
            } else {
                const winnerName = weekResult.winner === 'policial' ? 'Competidora B' : 'Competidor A';
                const winnerArea = weekResult.winner === 'policial' ? '√Årea Policial' : '√Årea Fiscal/Controle';
                
                html = `
                    <div style="text-align: center; padding: 20px;">
                        <h3 style="color: ${weekResult.winner === 'policial' ? 'var(--policial)' : 'var(--fiscal)'}; margin-bottom: 15px;">
                            <i class="fas fa-crown"></i> Vencedor da Semana ${weekResult.week}
                        </h3>
                        <div class="competitor-avatar ${weekResult.winner === 'policial' ? 'avatar-policial' : 'avatar-fiscal'}" 
                             style="width: 100px; height: 100px; margin: 0 auto 15px;">
                            <i class="${weekResult.winner === 'policial' ? 'fas fa-shield-alt' : 'fas fa-chart-line'}"></i>
                        </div>
                        <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 5px;">${winnerName}</div>
                        <div style="color: #666; margin-bottom: 15px;">${winnerArea}</div>
                        <div style="font-size: 1.5rem; color: ${weekResult.winner === 'policial' ? 'var(--policial)' : 'var(--fiscal)'}; 
                             font-weight: bold; margin-bottom: 20px;">${weekResult.points} pontos</div>
                        
                        <div style="background-color: #f8f9fa; padding: 15px; border-radius: 10px; margin: 20px 0;">
                            <p style="font-weight: bold; margin-bottom: 10px;">üéÅ Pr√™mios da Semana:</p>
                            <p>O vencedor tem direito a escolher:</p>
                            <ul style="text-align: left; margin-top: 10px; padding-left: 20px;">
                                <li>Filme/s√©rie da semana</li>
                                <li>Date pago pelo outro</li>
                                <li>Pedido especial (dentro do bom senso üòè)</li>
                                <li>Massagem, caf√© na cama ou jantar preparado</li>
                                <li>Escolher o rol√™ do fim de semana</li>
                            </ul>
                        </div>
                        
                        <p style="font-style: italic; color: var(--primary); margin-top: 20px;">
                            "Quem ganhar n√£o pode humilhar" üòå
                        </p>
                    </div>
                `;
            }
            
            // Se for final de temporada
            if (state.currentWeek === state.seasonWeeks && state.seasonWinner) {
                const seasonWinnerName = state.seasonWinner === 'policial' ? 'Competidora B' : 'Competidor A';
                
                html += `
                    <div style="background: linear-gradient(135deg, var(--warning), #f7b731); padding: 20px; border-radius: 10px; margin-top: 25px; color: white;">
                        <h3 style="margin-bottom: 10px;"><i class="fas fa-trophy"></i> CAMPE√ÉO DA TEMPORADA!</h3>
                        <p style="font-size: 1.3rem; font-weight: bold;">${seasonWinnerName}</p>
                        <p style="margin-top: 10px;">üèÜ Pr√™mios da Temporada:</p>
                        <ul style="text-align: left; margin-top: 10px; padding-left: 20px;">
                            <li>Um dia inteiro de mimos</li>
                            <li>Presente simb√≥lico</li>
                            <li>Carta rom√¢ntica</li>
                            <li>Jantar especial</li>
                            <li>Ou outro pr√™mio decidido em comum acordo</li>
                        </ul>
                    </div>
                `;
            }
            
            content.innerHTML = html;
            modal.style.display = 'flex';
        }
        
        function determineSeasonWinner() {
            // Contar vit√≥rias de cada competidor
            let policialWins = 0;
            let fiscalWins = 0;
            
            state.weekHistory.forEach(week => {
                if (week.winner === 'policial') policialWins++;
                if (week.winner === 'fiscal') fiscalWins++;
            });
            
            // Determinar campe√£o
            if (policialWins > fiscalWins) {
                state.seasonWinner = 'policial';
            } else if (fiscalWins > policialWins) {
                state.seasonWinner = 'fiscal';
            } else {
                // Empate na temporada - decidir por pontos totais
                let policialTotal = 0;
                let fiscalTotal = 0;
                
                state.weekHistory.forEach(week => {
                    policialTotal += week.details.policial;
                    fiscalTotal += week.details.fiscal;
                });
                
                if (policialTotal > fiscalTotal) {
                    state.seasonWinner = 'policial';
                } else if (fiscalTotal > policialTotal) {
                    state.seasonWinner = 'fiscal';
                } else {
                    state.seasonWinner = 'empate';
                }
            }
        }
        
        function resetWeekData() {
            // Manter apenas os dados de hist√≥rico
            state.points = { policial: 0, fiscal: 0 };
            state.metas = {
                policial: { 'lei-seca': false, 'questoes': false, 'disciplina': false },
                fiscal: { 'questoes': false, 'disciplina': false }
            };
            state.studyToday = { policial: 0, fiscal: 0 };
            state.extraQuestions = { policial: 0, fiscal: 0 };
            state.simulados = { policial: 0, fiscal: 0 };
            state.bonusConstancia = { policial: false, fiscal: false };
            state.penalidades = [];
        }
        
        function iniciarNovaSemana() {
            if (state.currentWeek <= state.seasonWeeks) {
                alert(`Iniciando semana ${state.currentWeek} da temporada!`);
                resetWeekData();
                updateUI();
            } else {
                alert('Temporada conclu√≠da! Reinicie a temporada para come√ßar um novo ciclo.');
            }
        }
        
        function closeModal() {
            document.getElementById('results-modal').style.display = 'none';
        }
        
        function showFeedback(message) {
            // Criar elemento de feedback
            const feedback = document.createElement('div');
            feedback.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background-color: var(--success);
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
                z-index: 1000;
                font-weight: 600;
                animation: slideIn 0.3s ease;
                max-width: 300px;
            `;
            
            feedback.textContent = message;
            document.body.appendChild(feedback);
            
            // Remover ap√≥s 3 segundos
            setTimeout(() => {
                feedback.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(feedback);
                }, 300);
            }, 3000);
            
            // Adicionar estilos de anima√ß√£o
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        }
        
        // Fun√ß√µes de persist√™ncia
        function saveToLocalStorage() {
            localStorage.setItem('concurseirosDoAmorState', JSON.stringify(state));
        }
        
        function loadFromLocalStorage() {
            const saved = localStorage.getItem('concurseirosDoAmorState');
            if (saved) {
                const savedState = JSON.parse(saved);
                Object.assign(state, savedState);
            }
        }
        
        function exportData() {
            const dataStr = JSON.stringify(state, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `concurseiros-do-amor-dados-${new Date().toISOString().slice(0,10)}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showFeedback('Dados exportados com sucesso!');
        }
        
        function resetAllData() {
            if (confirm('Tem certeza que deseja reiniciar todos os dados? Isso apagar√° todo o hist√≥rico e pontua√ß√µes.')) {
                // Resetar estado
                state.currentWeek = 1;
                state.points = { policial: 0, fiscal: 0 };
                state.metas = {
                    policial: { 'lei-seca': false, 'questoes': false, 'disciplina': false },
                    fiscal: { 'questoes': false, 'disciplina': false }
                };
                state.studyToday = { policial: 0, fiscal: 0 };
                state.extraQuestions = { policial: 0, fiscal: 0 };
                state.simulados = { policial: 0, fiscal: 0 };
                state.bonusConstancia = { policial: false, fiscal: false };
                state.penalidades = [];
                state.weekHistory = [];
                state.seasonWinner = null;
                
                // Limpar localStorage
                localStorage.removeItem('concurseirosDoAmorState');
                
                // Atualizar UI
                updateUI();
                
                showFeedback('Todos os dados foram reiniciados!');
            }
        }
        
        // Fechar modal ao clicar fora dele
        window.onclick = function(event) {
            const modal = document.getElementById('results-modal');
            if (event.target === modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>
